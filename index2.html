<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>World Elite Motors — Infinite 3D Luxury Showroom</title>

<!-- Fonts + libs -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>

<style>
  :root{
    --bg:#040407; --card:#09131a; --muted:#9fb8c1; --gold:#d4af37;
    --accent: #00f6e6;
    --maxw:1300px;
  }
  *{box-sizing:border-box;font-family:Poppins,system-ui,Arial}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#000 0%, #07121a 70%);color:#eafcff;overflow-y:auto}
  a{color:inherit;text-decoration:none}

  /* LEFT MENU (pinned) */
  .left-menu{
    position:fixed;left:0;top:0;bottom:0;width:72px;background:rgba(0,0,0,0.7);backdrop-filter:blur(6px);
    border-right:1px solid rgba(255,255,255,0.04);z-index:200;transition:width .25s ease;display:flex;flex-direction:column;
  }
  .left-menu:hover{width:220px}
  .brand{
    display:flex;align-items:center;gap:12px;padding:18px 12px;
  }
  .logo{
    width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--gold),#ffd76b);display:flex;align-items:center;justify-content:center;color:#001;font-weight:800;
  }
  nav{display:flex;flex-direction:column;gap:8px;padding:6px 8px}
  nav a{display:flex;align-items:center;gap:12px;padding:8px;border-radius:10px;color:var(--muted);transition:background .18s}
  .left-menu:hover nav a{padding-left:16px}
  nav a:hover{background:rgba(255,255,255,0.03);color:var(--gold)}

  main{margin-left:72px;transition:margin-left .25s ease;max-width:var(--maxw);margin-right:auto;margin-left:92px;padding:28px}
  .left-menu:hover ~ main{margin-left:220px}

  /* HERO */
  .hero{display:flex;gap:28px;align-items:center;min-height:70vh;padding-top:18px}
  .hero-left{flex:1}
  h1{font-size:38px;margin:0 0 10px;font-weight:800}
  .lead{color:var(--muted);margin-bottom:18px}
  .controls{display:flex;gap:12px;align-items:center}
  .btn{padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
  .btn-primary{background:linear-gradient(90deg,var(--gold),#ffd76b);color:#001}
  .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}

  /* hero 3d preview */
  .hero-right{width:420px}
  .hero-canvas{width:420px;height:300px;border-radius:16px;overflow:hidden;border:1px solid rgba(255,255,255,0.04);box-shadow:0 20px 60px rgba(0,0,0,0.6)}

  /* Gallery / grid */
  .gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px;margin-top:28px}
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.12));
    border-radius:14px;overflow:hidden;position:relative;min-height:220px;transform-style:preserve-3d;
    transition:transform .45s cubic-bezier(.2,.9,.2,1), box-shadow .35s;
    border:1px solid rgba(255,255,255,0.03);
  }
  .card.loading{min-height:160px;background:linear-gradient(180deg,#06080a,#07121a)}
  .card:hover{transform:translateY(-8px) rotateX(4deg);box-shadow:0 30px 80px rgba(0,0,0,0.6)}
  .card img{width:100%;height:220px;object-fit:cover;display:block;filter:brightness(.82);transition:filter .35s}
  .card:hover img{filter:brightness(1)}
  .brand-tag{position:absolute;left:14px;bottom:14px;padding:8px 12px;border-radius:10px;background:rgba(0,0,0,0.5);color:var(--gold);font-weight:700}
  .meta{position:absolute;right:14px;top:14px;color:var(--muted);font-size:13px;background:rgba(0,0,0,0.28);padding:6px 8px;border-radius:8px}

  /* tilt effect inner */
  .card .inner{transform-style:preserve-3d;transition:transform .2s linear}

  /* long page spacing */
  .spacer{height:48px}

  /* audio control */
  .audio-control{position:fixed;right:18px;bottom:18px;background:linear-gradient(90deg,var(--gold),#ffd76b);padding:10px 12px;border-radius:12px;color:#001;font-weight:800;cursor:pointer;z-index:300;box-shadow:0 10px 30px rgba(0,0,0,0.6)}

  /* loader */
  .loader{display:flex;align-items:center;gap:8px;color:var(--muted);font-weight:600}

  /* responsive */
  @media (max-width:900px){
    main{margin-left:80px;padding:16px}
    .hero-right{display:none}
    .gallery{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}
  }
</style>
</head>
<body>

<!-- LEFT MENU -->
<div class="left-menu" aria-hidden="false">
  <div class="brand">
    <div class="logo">LX</div>
    <div style="display:none" class="brand-text">World Elite Motors</div>
  </div>

  <nav id="menuNav">
    <!-- menu items auto-populated -->
  </nav>

  <div style="padding:12px;color:var(--muted);font-size:12px;text-align:center">© 2025</div>
</div>

<main>
  <!-- HERO -->
  <section class="hero">
    <div class="hero-left">
      <h1>World Elite Motors — Infinite Luxury Showcase</h1>
      <p class="lead">Scroll down — discover premium cars & bikes from the world's finest makers. Smooth 3D preview, parallax & tilt, and lazy-loaded 300+ items.</p>

      <div class="controls">
        <button class="btn btn-primary" id="jumpTop">Start Tour</button>
        <button class="btn btn-ghost" id="downloadList">Download List</button>
        <div class="loader" id="countBadge" style="margin-left:12px">Loading...</div>
      </div>
    </div>

    <div class="hero-right">
      <div class="hero-canvas" id="heroCanvas"></div>
    </div>
  </section>

  <div class="spacer"></div>

  <!-- Gallery -->
  <div class="gallery" id="gallery" aria-live="polite"></div>

  <div style="height:80px"></div>
</main>

<!-- audio control (user-initiated) -->
<button id="audioBtn" class="audio-control" title="Play ambient">Play Ambient</button>

<script>
/* ============================
   Config & Brand Data
   ============================ */

const brands = [
  "Rolls-Royce","Bugatti","Ferrari","Lamborghini","Aston Martin",
  "Koenigsegg","Pagani","Bentley","Maserati","Porsche",
  "McLaren","Maybach","Lexus","Jaguar","Range Rover",
  "BMW Motorrad","Ducati","Harley-Davidson","Triumph","Tesla"
];

// create 300 items by combining brand + model tag
const TOTAL_ITEMS = 300;
const items = [];
for(let i=0;i<TOTAL_ITEMS;i++){
  const b = brands[i % brands.length];
  const modelSuffix = 100 + Math.floor(i/brands.length) + (i%5);
  const name = `${b} Model ${modelSuffix}`;
  // Unsplash random image by query (may return different images) — replace later with own assets if desired
  const img = `https://source.unsplash.com/900x600/?${encodeURIComponent(b+' car')}&sig=${i}`;
  items.push({id:i,brand:b,name, img});
}

/* ============================
   Left menu (auto populate with brands)
   ============================ */
const menuNav = document.getElementById('menuNav');
brands.forEach((b, idx)=>{
  const a = document.createElement('a');
  a.href = `#`;
  a.innerHTML = `<span>${b}</span>`;
  a.addEventListener('click',(e)=>{
    e.preventDefault();
    // scroll to approximate position of first item of brand
    const firstIndex = items.findIndex(it=>it.brand===b);
    if(firstIndex>=0){
      const el = document.querySelector(`.card[data-index="${firstIndex}"]`);
      if(el) el.scrollIntoView({behavior:'smooth', block:'center'});
    }
  });
  menuNav.appendChild(a);
});

/* ============================
   Hero Three.js mini-glossy orb (light 3D feel)
   ============================ */
(function initHero3D(){
  const el = document.getElementById('heroCanvas');
  if(!el || window.innerWidth < 900) { el.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;height:100%;color:var(--muted)">Preview</div>'; return; }
  const W = el.clientWidth, H = el.clientHeight;
  const renderer = new THREE.WebGLRenderer({antialias:true,alpha:true});
  renderer.setSize(W,H); renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));
  el.appendChild(renderer.domElement);

  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(40, W/H, 0.1, 1000);
  camera.position.set(0,0,6);

  const light = new THREE.PointLight(0xffffff,1.2);
  light.position.set(5,5,5);
  scene.add(light);
  scene.add(new THREE.AmbientLight(0x404040, 0.9));

  // glossy torus + sphere for premium shimmer
  const mat = new THREE.MeshStandardMaterial({color:0x0a2230, metalness:0.9, roughness:0.12, envMapIntensity:1});
  const geo = new THREE.TorusKnotGeometry(1.1,0.28,128,24,3,7);
  const mesh = new THREE.Mesh(geo, mat);
  mesh.rotation.x = 0.6;
  scene.add(mesh);

  // subtle animate
  function animate(t){
    mesh.rotation.y += 0.0045;
    mesh.rotation.x += 0.0012;
    renderer.render(scene,camera);
    requestAnimationFrame(animate);
  }
  animate();

  // handle resize
  window.addEventListener('resize', ()=> {
    const W2 = el.clientWidth, H2 = el.clientHeight;
    renderer.setSize(W2,H2); camera.aspect = W2/H2; camera.updateProjectionMatrix();
  });
})();

/* ============================
   Gallery rendering with lazy image + tilt effect
   ============================ */

const gallery = document.getElementById('gallery');
const countBadge = document.getElementById('countBadge');

function createCard(item){
  const card = document.createElement('article');
  card.className = 'card loading';
  card.setAttribute('data-index', item.id);
  card.innerHTML = `
    <div class="inner">
      <img data-src="${item.img}" alt="${item.name}" loading="lazy" />
      <div class="brand-tag">${item.brand}</div>
      <div class="meta">${item.name}</div>
    </div>`;
  // mouse tilt
  card.addEventListener('mousemove', e=>{
    const rect = card.getBoundingClientRect();
    const cx = rect.left + rect.width/2;
    const cy = rect.top + rect.height/2;
    const dx = e.clientX - cx;
    const dy = e.clientY - cy;
    const rx = (dy / rect.height) * -6; // rotateX
    const ry = (dx / rect.width) * 8; // rotateY
    card.querySelector('.inner').style.transform = `rotateX(${rx}deg) rotateY(${ry}deg) translateZ(6px)`;
  });
  card.addEventListener('mouseleave', ()=> {
    card.querySelector('.inner').style.transform = `rotateX(0deg) rotateY(0deg) translateZ(0px)`;
  });
  return card;
}

// render initial batch for performance
const BATCH = 24;
let rendered = 0;
function renderBatch(){
  const fragment = document.createDocumentFragment();
  for(let i=0;i<BATCH && rendered < items.length;i++, rendered++){
    const card = createCard(items[rendered]);
    fragment.appendChild(card);
  }
  gallery.appendChild(fragment);
  // update count
  countBadge.innerText = `Showing ${rendered} / ${items.length}`;
  // observe new images for lazy load + intersection reveal
  observeNewCards();
}

// intersection observer for images + reveal
const ioReveal = new IntersectionObserver((entries)=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting){
      const el = entry.target;
      el.classList.add('visible');
      // lazy load image
      const img = el.querySelector('img');
      const src = img.getAttribute('data-src');
      if(src && !img.src){
        img.src = src;
        img.onload = ()=> {
          el.classList.remove('loading');
        };
        img.onerror = ()=> {
          // fallback gray
          img.src = 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="900" height="600"><rect width="100%" height="100%" fill="#111"/><text x="50%" y="50%" fill="#666" font-size="24" font-family="Arial" text-anchor="middle" alignment-baseline="middle">Image</text></svg>`);
          el.classList.remove('loading');
        };
      } else {
        el.classList.remove('loading');
      }
      ioReveal.unobserve(el);
    }
  });
},{rootMargin:'0px 0px 200px 0px', threshold: 0.12});

function observeNewCards(){
  document.querySelectorAll('.card').forEach(c => {
    if(!c.classList.contains('observed')){
      ioReveal.observe(c);
      c.classList.add('observed');
    }
  });
}

// infinite scroll: when near bottom, render next batch
window.addEventListener('scroll', ()=>{
  const scrolled = window.scrollY + window.innerHeight;
  const docHeight = document.documentElement.scrollHeight;
  if(docHeight - scrolled < 900 && rendered < items.length){
    renderBatch();
  }
});

// initial render
renderBatch();

/* ============================
   Download list (one-pager) for buyers
   ============================ */
document.getElementById('downloadList').addEventListener('click', ()=> {
  const txt = items.map(it=> `${it.brand} | ${it.name} | ${it.img}`).join('\n');
  const blob = new Blob([txt], {type:'text/plain'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'world-elite-list.txt'; document.body.appendChild(a); a.click(); a.remove();
});

/* Jump top */
document.getElementById('jumpTop').addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));

/* ============================
   Audio: user-initiated ambient track (replace URL with your track)
   ============================ */
const audioBtn = document.getElementById('audioBtn');
let audioPlaying = false;
// placeholder ambient track (free demo). Replace with your hosted mp3 if you want.
const AUDIO_URL = "https://cdn.pixabay.com/download/audio/2021/08/04/audio_0c8fb1f90f.mp3?filename=cinematic-ambient-111588.mp3";
const bgAudio = new Audio(AUDIO_URL);
bgAudio.loop = true;
bgAudio.volume = 0.35;
audioBtn.addEventListener('click', async ()=>{
  try{
    if(!audioPlaying){
      await bgAudio.play();
      audioBtn.innerText = 'Pause Ambient';
      audioPlaying = true;
    } else {
      bgAudio.pause();
      audioBtn.innerText = 'Play Ambient';
      audioPlaying = false;
    }
  }catch(e){
    alert('Audio blocked by browser. Tap anywhere on page and try again.');
  }
});

/* accessibility: show total count badge properly once loaded */
window.addEventListener('load', ()=> {
  countBadge.innerText = `Showing ${rendered} / ${items.length}`;
});

/* cleanup on unload (free three canvases) */
window.addEventListener('beforeunload', ()=> {
  // noop for now
});
</script>
</body>
</html>

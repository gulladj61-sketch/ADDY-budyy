<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MineBot AI Studio â€” All-in-one Demo</title>
<meta name="description" content="MineBot AI Studio â€” premium demo: voice chat + 20 AI tools (frontend) â€” deployable on GitHub Pages." />
<style>
  :root{
    --bg:#07070a;
    --panel:#0f1724;
    --card:#0b1220;
    --muted:#9aa4b2;
    --accent1:#7c3aed;
    --accent2:#06b6d4;
    --glass:rgba(255,255,255,0.03);
    --success:#10b981;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Helvetica,Arial;background:linear-gradient(180deg,var(--bg),#07102a);color:#e6eef6;-webkit-font-smoothing:antialiased}
  .wrap{max-width:1200px;margin:18px auto;padding:14px}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px}
  .brand{display:flex;gap:12px;align-items:center}
  .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:800;color:#031026}
  nav a{color:var(--muted);text-decoration:none;margin-left:14px;font-weight:600;font-size:14px}
  .hero{display:flex;gap:18px;align-items:center;justify-content:space-between;margin-bottom:16px;flex-wrap:wrap}
  .hero-left{max-width:720px}
  h1{font-size:26px;margin:0 0 6px}
  p.lead{color:var(--muted);margin:0 0 14px}
  .cta{display:flex;gap:10px;flex-wrap:wrap}
  .btn{background:linear-gradient(90deg,var(--accent1),var(--accent2));border:none;padding:10px 14px;border-radius:10px;color:#031026;font-weight:800;cursor:pointer;box-shadow:0 8px 30px rgba(2,6,23,0.6)}
  .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}
  /* layout */
  .grid{display:grid;grid-template-columns:1fr 420px;gap:18px}
  .panel{background:var(--panel);border-radius:12px;padding:14px;border:1px solid rgba(255,255,255,0.03)}
  .tools{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  .tool{background:var(--card);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.02)}
  .tool h4{margin:0 0 6px;font-size:15px}
  .tool .small{color:var(--muted);font-size:13px;margin-bottom:8px}
  input[type="text"], textarea, select { width:100%; padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:inherit; margin-top:6px; font-size:14px}
  .run-row{display:flex;gap:8px;margin-top:8px}
  .chip{display:inline-block;padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.02);font-size:13px;color:var(--muted)}
  .tools-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
  /* chat panel */
  .chat-panel{display:flex;flex-direction:column;height:520px}
  .chat-window{flex:1;overflow:auto;padding:12px;border-radius:8px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005))}
  .msg{max-width:78%;padding:10px;border-radius:10px;margin:8px 0;line-height:1.4}
  .msg.user{margin-left:auto;background:linear-gradient(90deg,#00c897,#00f5a0);color:#021613}
  .msg.bot{background:var(--glass);color:inherit;border:1px solid rgba(255,255,255,0.02)}
  .input-row{display:flex;gap:8px;align-items:center;margin-top:8px}
  .small{font-size:13px;color:var(--muted)}
  /* aside */
  .right-card{position:sticky;top:18px}
  .meta{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:10px}
  .k{font-weight:800;color:var(--accent1);font-size:20px}
  /* floating MineBot */
  .chat-floating{position:fixed;right:14px;bottom:14px;z-index:12000;font-family:Inter,system-ui}
  .chat-button{width:58px;height:58px;border-radius:999px;background:linear-gradient(135deg,#0b0b0c,#161616);border:1px solid rgba(255,255,255,0.04);display:flex;align-items:center;justify-content:center;color:var(--muted);cursor:pointer;box-shadow:0 10px 30px rgba(2,6,23,0.7)}
  .chat-panel-float{width:360px;max-width:92vw;background:linear-gradient(180deg,#060606,#0b0b0b);border-radius:12px;box-shadow:0 18px 60px rgba(0,0,0,0.6);overflow:hidden;border:1px solid rgba(255,255,255,0.04)}
  .chat-header{display:flex;gap:10px;align-items:center;padding:10px;border-bottom:1px solid rgba(255,255,255,0.02)}
  .avatar{width:44px;height:44px;border-radius:8px;background:linear-gradient(135deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:800;color:#031026}
  .chat-body{padding:12px;height:320px;overflow:auto;background:linear-gradient(180deg, rgba(255,255,255,0.0), rgba(255,255,255,0.01))}
  .chat-footer{display:flex;gap:8px;padding:10px;border-top:1px solid rgba(255,255,255,0.02);background:linear-gradient(180deg,#050505,#0b0b0b)}
  .chat-input{flex:1;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
  .mic-btn{background:#111;border:1px solid rgba(255,255,255,0.04);color:#fff;padding:8px;border-radius:8px;cursor:pointer}
  .voice-btn{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:8px;border-radius:8px;cursor:pointer}
  .typing{display:inline-block;height:10px;width:28px;position:relative}
  .typing span{display:block;width:6px;height:6px;background:#9aa4b2;border-radius:50%;position:absolute;bottom:0;animation:dot 1s infinite;opacity:.9}
  .typing span:nth-child(1){left:0;animation-delay:0s} .typing span:nth-child(2){left:10px;animation-delay:.15s} .typing span:nth-child(3){left:20px;animation-delay:.3s}
  @keyframes dot{0%{transform:translateY(0);opacity:.2}50%{transform:translateY(-6px);opacity:1}100%{transform:translateY(0);opacity:.2}}
  /* responsive */
  @media(max-width:980px){ .grid{grid-template-columns:1fr} .chat-panel{height:auto} .chat-panel-float{width:92vw} .hero-left{max-width:100%} .tools{grid-template-columns:1fr} }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">MB</div>
        <div>
          <div style="font-weight:800">MineBot AI Studio</div>
          <div class="small">20+ Tools Â· Voice Chat Â· Demo-ready</div>
        </div>
      </div>
      <nav>
        <a href="#tools">Tools</a>
        <a href="#agent">Agent</a>
        <a href="#sell">Sell</a>
      </nav>
    </header>

    <section class="hero">
      <div class="hero-left">
        <h1>MineBot AI Studio â€” Premium toolkit</h1>
        <p class="lead">All-in-one frontend demo: voice-enabled MineBot + 20 working AI-style tools. No API keys required for demo mode â€” upgrade later to connect real LLMs.</p>
        <div class="cta">
          <button class="btn" onclick="gotoTools()">Open Tools</button>
          <button class="btn ghost" onclick="gotoAgent()">MineBot</button>
        </div>
        <div style="margin-top:12px" class="meta">
          <div class="chip">Works on mobile</div>
          <div class="chip">Acode + GitHub Pages ready</div>
          <div class="chip">Replace demo with API to enable production</div>
        </div>
      </div>

      <div style="width:420px" class="panel card right-card">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:800">Quick Demo</div>
            <div class="small">Try a sample chat or open tools</div>
          </div>
          <div style="text-align:right">
            <div class="small">Visitors</div>
            <div class="k" id="vis-big">0</div>
          </div>
        </div>

        <div style="margin-top:12px">
          <div class="small">Active Tools</div>
          <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap">
            <div class="chip">Writer</div><div class="chip">Code</div><div class="chip">Voice</div><div class="chip">Translate</div>
          </div>
        </div>

        <div style="margin-top:12px">
          <div class="small">Pricing (sample)</div>
          <div style="font-weight:800;font-size:22px">$1,200</div>
          <div class="small">One-time license â€” includes source & 7-day support</div>
        </div>
      </div>
    </section>

    <div class="grid" id="tools-area">
      <div class="panel card chat-panel" id="agent">
        <h3 id="agent-title">MineBot â€” Voice & Chat</h3>
        <div class="chat-window" id="chatWindow">
          <div class="msg bot">Hello! I'm MineBot. Click mic ðŸŽ¤ or type â€” I can speak and listen.</div>
        </div>
        <div class="input-row" style="margin-top:8px">
          <input id="chatInput" placeholder="Type a message or press mic" />
          <button class="mic-btn" id="micBtn" title="Toggle mic">ðŸŽ¤</button>
          <button class="voice-btn" id="voiceBtn" title="Toggle voice">ðŸ”Š</button>
          <button class="btn" id="chatSend">Send</button>
        </div>
        <div style="margin-top:8px" class="small">Tip: Use Chrome/Edge on Android for best microphone support.</div>
      </div>

      <aside class="panel card right-card" style="padding-bottom:16px">
        <h3 id="tools">20 AI Tools</h3>
        <div class="small">Select a tool, enter input, and run to see a demo result. Replace demo logic with your API later for real responses.</div>

        <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
          <button class="chip" onclick="selectTool('writer')">AI Writer</button>
          <button class="chip" onclick="selectTool('code')">Code Helper</button>
          <button class="chip" onclick="selectTool('prompt')">Prompt Maker</button>
          <button class="chip" onclick="selectTool('translate')">Translator</button>
          <button class="chip" onclick="selectTool('summarize')">Summarizer</button>
          <button class="chip" onclick="selectTool('seo')">SEO Title Maker</button>
          <button class="chip" onclick="selectTool('ideas')">Business Ideas</button>
          <button class="chip" onclick="selectTool('imageprompt')">Image Prompt</button>
          <button class="chip" onclick="selectTool('story')">Story Maker</button>
          <button class="chip" onclick="selectTool('study')">Study Helper</button>
          <button class="chip" onclick="selectTool('email')">Email Writer</button>
          <button class="chip" onclick="selectTool('adcopy')">Ad Copy</button>
          <button class="chip" onclick="selectTool('translate-brief')">Translator (brief)</button>
          <button class="chip" onclick="selectTool('summarize-long')">Long Summarizer</button>
          <button class="chip" onclick="selectTool('regex')">Regex Maker</button>
          <button class="chip" onclick="selectTool('motivate')">Motivation Bot</button>
          <button class="chip" onclick="selectTool('character')">Character Chat</button>
          <button class="chip" onclick="selectTool('numsupport')">Support Reply</button>
          <button class="chip" onclick="selectTool('tweet')">Tweet Composer</button>
          <button class="chip" onclick="selectTool('tts')">Voice Agent (TTS)</button>
        </div>

        <div id="toolPanel" style="margin-top:12px">
          <!-- dynamic tool UI injected here -->
        </div>

      </aside>
    </div>

    <section id="sell" class="panel card" style="margin-top:18px">
      <h3>What to include when selling</h3>
      <ul style="color:var(--muted)">
        <li>Full source (index.html + assets)</li>
        <li>README with setup + optional API integration guide</li>
        <li>Demo video & 7-day handover support</li>
      </ul>
    </section>

    <footer style="margin-top:18px" class="small">Â© <span id="year"></span> MineBot AI Studio â€” Demo. Replace demo logic with your API to enable production features.</footer>
  </div>

  <!-- floating MineBot chat -->
  <div class="chat-floating" id="chatFloating">
    <div id="floatPanel" style="display:none" class="chat-panel-float">
      <div class="chat-header">
        <div class="avatar">MB</div>
        <div>
          <div style="font-weight:700">MineBot</div>
          <div class="small">Offline demo assistant</div>
        </div>
        <div style="margin-left:auto" class="small">v2.0</div>
      </div>
      <div class="chat-body" id="floatBody">
        <div class="msg bot">Hi â€” I'm MineBot. I can listen and speak. Try "help".</div>
      </div>
      <div class="chat-footer">
        <button class="mic-btn" id="floatMic">ðŸŽ¤</button>
        <button class="voice-btn" id="floatVoice">ðŸ”Š</button>
        <input id="floatInput" placeholder="Type a message..." class="chat-input" />
        <button class="btn" id="floatSend">Send</button>
      </div>
    </div>
    <button id="floatToggle" class="chat-button" title="Open MineBot">ðŸ’¬</button>
  </div>

<script>
/* ====== Basic setup ====== */
document.getElementById('year').textContent = new Date().getFullYear();
(function(){ const k = 'mb-vis'; let v = parseInt(localStorage.getItem(k)||'0',10); v++; localStorage.setItem(k,v); document.getElementById('vis-big').innerText = v; })();

/* ====== Agent chat (main panel) ====== */
const chatWindow = document.getElementById('chatWindow');
const chatInput = document.getElementById('chatInput');
const chatSend = document.getElementById('chatSend');
function appendMsg(text, who='bot', target=chatWindow){
  const d = document.createElement('div'); d.className = 'msg ' + (who==='user'?'user':'bot'); d.innerText = text; target.appendChild(d); target.scrollTop = target.scrollHeight;
}
function showTyping(target=chatWindow, text='...'){
  const d = document.createElement('div'); d.className='msg bot'; d.innerText = text; target.appendChild(d); target.scrollTop = target.scrollHeight; return d;
}
chatSend.addEventListener('click', ()=>{ const t = chatInput.value.trim(); if(!t) return; appendMsg(t,'user'); chatInput.value=''; handleBotReply(t, chatWindow); });
chatInput.addEventListener('keydown',(e)=>{ if(e.key==='Enter'){ e.preventDefault(); chatSend.click(); } });

/* ====== Floating MineBot ====== */
const floatToggle = document.getElementById('floatToggle'), floatPanel = document.getElementById('floatPanel'), floatBody = document.getElementById('floatBody'), floatInput = document.getElementById('floatInput'), floatSend = document.getElementById('floatSend'), floatMic = document.getElementById('floatMic'), floatVoice = document.getElementById('floatVoice');
let floatOpen = false;
floatToggle.addEventListener('click', ()=>{ floatOpen = !floatOpen; floatPanel.style.display = floatOpen ? 'block':'none'; floatToggle.innerText = floatOpen ? 'âœ–' : 'ðŸ’¬'; if(floatOpen) floatInput.focus(); });
floatSend.addEventListener('click', ()=>{ const t = floatInput.value.trim(); if(!t) return; appendMsg(t,'user', floatBody); floatInput.value=''; handleBotReply(t, floatBody, true); });
floatInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); floatSend.click(); } });

/* ====== Voice: SpeechSynthesis (TTS) & SpeechRecognition (STT) ====== */
const synth = window.speechSynthesis || null;
function speak(text, opts={rate:1,pitch:1,voice:null}){ return new Promise((res)=>{ if(!synth){ res(); return; } try{ synth.cancel(); const u = new SpeechSynthesisUtterance(text); u.rate=opts.rate; u.pitch=opts.pitch; if(opts.voice && synth.getVoices){ const v = synth.getVoices().find(x=>x.name===opts.voice); if(v) u.voice = v; } u.onend=res; u.onerror=res; synth.speak(u);}catch(e){res();} }); }

/* STT */
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition || null;
let recognizer = null, listening=false;
if(SpeechRecognition){
  recognizer = new SpeechRecognition();
  recognizer.lang='en-US';
  recognizer.interimResults=false;
  recognizer.maxAlternatives=1;
  recognizer.continuous=false;
  recognizer.onresult = (ev)=>{ const txt = ev.results[0][0].transcript || ''; if(currentFloat) appendMsg(txt,'user',currentFloatBody); else appendMsg(txt,'user'); // delegate
    if(currentFloat) handleBotReply(txt, currentFloatBody, true); else handleBotReply(txt, chatWindow);
    stopListeningUI();
  };
  recognizer.onerror = (e)=>{ stopListeningUI(); };
  recognizer.onend = ()=>{ listening=false; stopListeningUI(); };
}

function startListeningUI(targetBody){
  if(!recognizer){ alert('Mic not supported in this browser. Use Chrome/Edge on Android/PC.'); return; }
  listening = true; recognizer.start();
  // small UI
  appendMsg('Listening...','bot', targetBody || chatWindow);
}
function stopListeningUI(){ listening=false; try{ recognizer.stop(); }catch(e){} /* remove 'Listening...' lines maybe */ }

/* wire mic buttons */
let currentFloat=false, currentFloatBody=null;
floatMic.addEventListener('click', ()=>{ currentFloat=true; currentFloatBody=floatBody; startListeningUI(floatBody); });
document.getElementById('micBtn').addEventListener('click', ()=>{ currentFloat=false; currentFloatBody=null; startListeningUI(chatWindow); });
floatVoice.addEventListener('click', ()=>{ // toggle voice for float
  window.MB_VOICE = !window.MB_VOICE; floatVoice.style.opacity = window.MB_VOICE? '1':'0.4';
});
document.getElementById('voiceBtn').addEventListener('click', ()=>{ window.MB_VOICE = !window.MB_VOICE; document.getElementById('voiceBtn').style.opacity = window.MB_VOICE? '1':'0.4'; });

window.MB_VOICE = true; // default voice on

/* ====== Demo response generator (used by both main & float) ====== */
function handleBotReply(text, outTarget, isFloat){
  // show typing
  const tid = showTyping(outTarget, 'MineBot is typing...');
  // simulate delay based on length
  const delay = Math.min(1800, 400 + Math.min(2200, text.length * 40));
  setTimeout(async ()=>{
    tid.remove();
    const reply = generateResponse(text);
    appendMsg(reply,'bot', outTarget);
    // tts if enabled
    if(window.MB_VOICE && typeof speak === 'function'){
      await speak(reply,{rate:1,pitch:1});
    }
  }, delay);
}

function generateResponse(text){
  const t = (text||'').toLowerCase();
  if(t.includes('help')) return 'Try the tools panel â€” pick a tool and press Run. You can ask me to "write", "summarize", "translate" or "generate ideas".';
  if(t.includes('sell')||t.includes('price')||t.includes('value')) return 'To sell, include source, README, demo video, and a short onboarding guide. Offer first-line support.';
  if(t.includes('deploy')||t.includes('publish')) return 'Push index.html to your repo root and enable GitHub Pages in Settings â†’ Pages â†’ Source: main /(root).';
  if(t.includes('voice')) return 'This demo uses your browser voice. For studio-grade voices, integrate ElevenLabs API or Google Cloud TTS and provide your API key.';
  if(t.includes('hello')||t.includes('hi')) return 'Hello! I am MineBot â€” tell me which tool you want to try or ask me a question.';
  if(t.includes('code')) return 'Code helper: paste a short snippet and ask for explanation or bug fixes. Use the Code Helper tool in the Tools panel.';
  return "Nice question. For a live LLM connect your server endpoint and enable API_MODE. Meanwhile try the tools for useful demo outputs.";
}

/* ====== Tools system (20 tools) ====== */
const toolPanel = document.getElementById('toolPanel');
let activeTool = null;
function selectTool(id){
  activeTool = id;
  renderToolUI(id);
}

function renderToolUI(id){
  const t = id;
  toolPanel.innerHTML = ''; // clear
  const wrap = document.createElement('div'); wrap.className='tool';
  // title + desc
  const h = document.createElement('h4'); h.innerText = toolNames[t] || 'Tool';
  const s = document.createElement('div'); s.className='small'; s.innerText = toolDesc[t] || '';
  wrap.appendChild(h); wrap.appendChild(s);

  // input
  const inp = document.createElement('textarea'); inp.rows=4; inp.placeholder = toolPlace[t] || 'Enter input here...'; wrap.appendChild(inp);

  // extra select or options for some tools
  if(t==='translate' || t==='translate-brief'){
    const sel = document.createElement('select'); sel.innerHTML = '<option value="hi">Hindi</option><option value="en" selected>English</option><option value="es">Spanish</option><option value="fr">French</option>'; wrap.appendChild(sel);
    sel.style.marginTop='8px';
  }
  if(t==='tts'){
    const voiceSel = document.createElement('select'); voiceSel.innerHTML = '<option value="default">Browser Voice</option><option value="deep">Deep Voice (demo)</option>'; wrap.appendChild(voiceSel); voiceSel.style.marginTop='8px';
  }

  // run row
  const runRow = document.createElement('div'); runRow.className='run-row';
  const runBtn = document.createElement('button'); runBtn.className='btn'; runBtn.innerText='Run';
  const copyBtn = document.createElement('button'); copyBtn.className='btn ghost'; copyBtn.innerText='Copy';
  runRow.appendChild(runBtn); runRow.appendChild(copyBtn);
  wrap.appendChild(runRow);

  // output area
  const out = document.createElement('textarea'); out.rows=6; out.readOnly=true; out.style.marginTop='10px'; wrap.appendChild(out);

  // wire
  runBtn.addEventListener('click', ()=> {
    const v = inp.value.trim();
    out.value = 'Working...';
    setTimeout(()=>{ try{ const res = runTool(t, v, wrap); out.value = res; }catch(e){ out.value = 'Error: '+e.message } }, 300);
  });
  copyBtn.addEventListener('click', ()=>{ navigator.clipboard.writeText(out.value||''); copyBtn.innerText='Copied'; setTimeout(()=>copyBtn.innerText='Copy',900); });

  toolPanel.appendChild(wrap);
}

/* tool metadata */
const toolNames = {
  writer:'AI Writer', code:'Code Helper', prompt:'Prompt Maker', translate:'Translator', summarize:'Summarizer',
  seo:'SEO Title Maker', ideas:'Business Ideas', imageprompt:'Image Prompt Maker', story:'Story Maker', study:'Study Helper',
  email:'Email Writer', adcopy:'Ad Copy Generator', 'translate-brief':'Translator (brief)', 'summarize-long':'Long Summarizer',
  regex:'Regex Builder', motivate:'Motivation Bot', character:'Character Chat', numsupport:'Support Reply', tweet:'Tweet Composer', tts:'Voice Agent (TTS)'
};
const toolDesc = {
  writer:'Generate blog intro, social captions, or long-form copy. Enter topic / short brief.', code:'Paste code or ask a debugging question.', prompt:'Create high-quality image prompts for diffusion AIs.', translate:'Translate to selected language.', summarize:'Short summary of input.', seo:'Short SEO title ideas from phrase.', ideas:'Generate business idea variants.', imageprompt:'Create image prompts from description.', story:'Generate short story or creative piece.', study:'Explain concept simply; ask questions.',
  email:'Generate professional email drafts.', adcopy:'Create 3 ad headlines and descriptions.', 'translate-brief':'Translate single sentences quickly.', 'summarize-long':'Summarize long text into bullets.', regex:'Turn description into a regex pattern.', motivate:'Short motivational message or pep talk.', character:'Role-play as chosen character (e.g., "pirate").', numsupport:'Write support response for ticket.', tweet:'Create tweet-sized content.', tts:'Generate or speak text using browser voice.'
};
const toolPlace = {
  writer:'Topic + tone (e.g., "Write a blog intro about time management, friendly tone")',
  code:'Paste code or describe error (e.g., "Fix this JS error: ...")',
  prompt:'Describe the image idea (e.g., "cyberpunk city at night, neon")',
  translate:'Enter text to translate',
  summarize:'Paste paragraph to summarize',
  seo:'Enter main keyword or topic',
  ideas:'Enter domain or industry (e.g., "fitness apps")',
  imageprompt:'Describe scene to generate prompts',
  story:'Give a hook or genre',
  study:'Ask a question or topic to explain',
  email:'Give recipient and context (e.g., "apology for delay")',
  adcopy:'Product name + benefit',
  'translate-brief':'Short phrase',
  'summarize-long':'Paste long article',
  regex:'Describe pattern needed (e.g., "match phone numbers India")',
  motivate:'Name or short context',
  character:'Character name and prompt (e.g., "Yoda, give advice")',
  numsupport:'Ticket text or customer message',
  tweet:'Topic + tone',
  tts:'Text to speak'
};

/* core tool logic â€” demo/heuristic implementations */
function runTool(id, input, container){
  input = (input||'').trim();
  if(id==='writer'){
    if(!input) return 'Give a topic to write about.';
    return `Intro:\n${simpleSentenceCase(input)} â€” This guide will help you understand key actions and next steps. \n\nOutline:\n1) Problem\n2) Solution\n3) How to start\n\nCTA: Try MineBot AI Studio for fast results.`;
  }
  if(id==='code'){
    if(!input) return 'Paste code or describe error.';
    if(input.toLowerCase().includes('error')) return 'Suggestion: Check variable names, console logs, and ensure async/await usage. Provide the exact error for a precise fix.';
    return `Explanation:\nâ€¢ This code snippet appears to ${input.split(/\s+/).slice(0,6).join(' ')}...\nâ€¢ Tip: Add console.log to inspect values.`;
  }
  if(id==='prompt' || id==='imageprompt'){
    if(!input) return 'Describe the scene or style.';
    return `Prompt (v1): "${input}, cinematic, ultra-detailed, 8k, dramatic lighting"\nPrompt (v2): "${input}, photorealistic, soft film grain, high detail"`;
  }
  if(id==='translate' || id==='translate-brief'){
    if(!input) return 'Enter text to translate.';
    // detect target select
    const sel = container.querySelector('select');
    const target = sel ? sel.value : 'en';
    // naive demo: reverse words for fun if hindi selected (demo)
    if(target==='hi') return `à¤¹à¤¿à¤‚à¤¦à¥€ (demo): ${input.split('').reverse().join('')}`;
    if(target==='es') return `EspaÃ±ol (demo): ${input} (traducciÃ³n demo)`;
    return `English (demo): ${input}`;
  }
  if(id==='summarize' || id==='summarize-long'){
    if(!input) return 'Paste text to summarize.';
    // simple heuristics: return first sentence + 3 bullets
    const s = input.split(/[.!?]\s/).slice(0,1).join('');
    return `Short summary: ${s}\n\nKey points:\n- Point A\n- Point B\n- Action item: Next step`;
  }
  if(id==='seo'){
    if(!input) return 'Enter main keyword.';
    return `${input} â€” Boost conversions with clear value proposition. | 3 SEO Titles:\n1) ${input} to Grow Faster\n2) ${input}: The Ultimate Guide\n3) How to Use ${input} for 2025`;
  }
  if(id==='ideas'){
    if(!input) return 'Enter industry or interest.';
    return `3 Business ideas for "${input}":\n1) Niche subscription service\n2) Localized marketplace\n3) B2B automation tool`;
  }
  if(id==='story'){
    if(!input) return 'Provide a hook or theme.';
    return `${simpleSentenceCase(input)} â€” Once upon a time... (short story snippet)\n\n[Continue with 3 more paragraphs in full product]`;
  }
  if(id==='study'){
    if(!input) return 'Ask a study question.';
    return `Explain simply: ${input}\n- Definition\n- Example\n- Quick quiz question: ...`;
  }
  if(id==='email'){
    if(!input) return 'Provide context/recipient.';
    return `Email draft:\nHi [Name],\nI hope you are well. ${input}\nRegards,\n[Your Name]`;
  }
  if(id==='adcopy'){
    if(!input) return 'Product + benefit';
    return `Ad headlines:\n1) ${input} â€” Transform your workflow.\n2) ${input} â€” Faster, smarter results.\nDescriptions: Focus on benefit + CTA.`;
  }
  if(id==='regex'){
    if(!input) return 'Describe pattern needed.';
    // demo common patterns
    if(input.toLowerCase().includes('phone')) return 'Regex (India mobile): /(?:\\+91|0)?[6789]\\d{9}/';
    if(input.toLowerCase().includes('email')) return 'Regex (email): /^[\\w.-]+@[\\w.-]+\\.\\w{2,}$/';
    return 'Regex (demo): /pattern_here/';
  }
  if(id==='motivate'){
    if(!input) return 'Tell me a short context or name.';
    return `Hey ${input || 'there'} â€” Keep going. Small steps daily add up. You got this.`;
  }
  if(id==='character'){
    if(!input) return 'Name a character role (e.g., "Yoda").';
    return `${input} says: "Do or do not. There is no try." (Demo role-play)`;
  }
  if(id==='numsupport'){
    if(!input) return 'Paste a customer message or ticket.';
    return `Support reply:\nHi, thanks for contacting us. We apologize â€” here's the fix: [steps]. If issue persists, reply and we'll help.`;
  }
  if(id==='tweet'){
    if(!input) return 'Topic + tone';
    return `${input} â€” Quick tweet: Excited to share ${input}. #AI #Product`;
  }
  if(id==='tts'){
    if(!input) return 'Enter text to speak.';
    // speak with browser voice
    speak(input).catch(()=>{});
    return 'Spoken using browser voice (demo).';
  }
  return 'Tool not implemented.';
}

/* helper */
function simpleSentenceCase(s){ if(!s) return s; s = s.trim(); return s.charAt(0).toUpperCase() + s.slice(1); }

/* select default tool */
selectTool('writer');

/* ====== Floating tool: quick open function ====== */
function gotoTools(){ location.hash='#tools'; document.getElementById('tools').scrollIntoView({behavior:'smooth'}); }
function gotoAgent(){ location.hash='#agent'; document.getElementById('agent').scrollIntoView({behavior:'smooth'}); }

/* ====== small polish: auto-open floating panel once for new visitors ====== */
if(!localStorage.getItem('mb-studio-seen')){
  localStorage.setItem('mb-studio-seen','1');
  setTimeout(()=>{ document.getElementById('floatToggle').click(); }, 900);
}

/* Accessibility: Enter key inside active tool runs (already handled by Run button) */

/* Optional: Hook to export / download package (simple demo) */
function downloadPackage(){
  const txt = `MineBot AI Studio â€” package\n\nInclude index.html and assets.`;
  const blob = new Blob([txt],{type:'text/plain'}); const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href=url; a.download='README-minebot.txt'; a.click(); URL.revokeObjectURL(url);
}

/* Expose for console debugging */
window.MineBotTools = { selectTool, runTool, toolNames };
</script>
</body>
</html>
<!-- updated -->
